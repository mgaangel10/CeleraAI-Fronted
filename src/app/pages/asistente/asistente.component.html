<div class="w-100 d-flex">
    <div class="w-25 align-content-center text-center" 
         style="height: 100vh; background: linear-gradient(135deg, #f0f4ff, #e4f7ff); 
                border-top-right-radius: 20px; border-bottom-right-radius: 15px;">
             <mat-card 
             class="business-card-gold mb-5 mx-auto"
             style="max-width: 500px; cursor: pointer;"
             [routerLink]="['/home']">
           
             <div class="p-4 d-flex align-items-center justify-content-between">
               <!-- Info del negocio -->
               <div class="d-flex flex-column">
                 <span class="text-uppercase small mb-1 text-dark" style="letter-spacing: 1px;">Tu negocio</span>
                 <h4 class="mb-0 fw-bold" style="color: #7D6608;">{{ nombre }}</h4>
               </div>
           
               <!-- Ãcono navegaciÃ³n -->
               <div class="d-flex align-items-center justify-content-center bg-white rounded-circle shadow-sm"
                    style="width: 45px; height: 45px;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                     <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
                   </svg>
               </div>
             </div>
           </mat-card>
        <div class="h-75">
            <app-header></app-header>
        </div>
    </div>
    
    <div class="d-flex flex-column justify-content-start align-items-center min-vh-100 w-100">
        <h3 class="text-center w-100 pt-4">Asistente de negocio con IA</h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16" (click)="open3(modalEjemploExcel)">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
          </svg>Ver en que puede ayudarte la IA
        
        <div class="w-100 py-4 d-flex justify-content-center align-items-center flex-grow-1">
            <div *ngIf="cargando" class="d-flex justify-content-center align-items-center w-75" style="height: 400px;">
                <div class="spinner-grow text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </div>
            <div *ngIf="!cargando" class="card shadow-lg rounded-4 border-0 w-75" 
                 style="background: linear-gradient(135deg, #1e1e2f, #3b3b58); color: white;">
                <div class="card-header text-center border-0" 
                     style="background: transparent; font-weight: bold; font-size: 1.2rem;">
                    <i class="bi bi-chat-dots-fill"></i> Chat con IA
                </div>
                <div class="card-body chat-box p-4" style="height: 400px; overflow-y: auto;">
                    <div class="d-flex justify-content-start mb-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" 
                             class="bi bi-slack" viewBox="0 0 16 16">
                            <path d="M3.362 10.11c0 .926-.756 1.681-1.681 1.681S0 11.036 0 10.111.756 8.43 1.68 8.43h1.682zm.846 0c0-.924.756-1.68 1.681-1.68s1.681.756 1.681 1.68v4.21c0 .924-.756 1.68-1.68 1.68a1.685 1.685 0 0 1-1.682-1.68zM5.89 3.362c-.926 0-1.682-.756-1.682-1.681S4.964 0 5.89 0s1.68.756 1.68 1.68v1.682zm0 .846c.924 0 1.68.756 1.68 1.681S6.814 7.57 5.89 7.57H1.68C.757 7.57 0 6.814 0 5.89c0-.926.756-1.682 1.68-1.682zm6.749 1.682c0-.926.755-1.682 1.68-1.682S16 4.964 16 5.889s-.756 1.681-1.68 1.681h-1.681zm-.848 0c0 .924-.755 1.68-1.68 1.68A1.685 1.685 0 0 1 8.43 5.89V1.68C8.43.757 9.186 0 10.11 0c.926 0 1.681.756 1.681 1.68zm-1.681 6.748c.926 0 1.682.756 1.682 1.681S11.036 16 10.11 16s-1.681-.756-1.681-1.68v-1.682h1.68zm0-.847c-.924 0-1.68-.755-1.68-1.68s.756-1.681 1.68-1.681h4.21c.924 0 1.68.756 1.68 1.68 0 .926-.756 1.681-1.68 1.681z"/>
                        </svg>
                        <div class="p-3 rounded-3" style="background: rgba(255, 255, 255, 0.1);">
                            Hola, Â¿en quÃ© puedo ayudarte?
                        </div>
                    </div>
                    <div class="d-flex justify-content-start  " *ngIf="respuesta">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" 
                            class="bi bi-slack" viewBox="0 0 16 16">
                           <path d="M3.362 10.11c0 .926-.756 1.681-1.681 1.681S0 11.036 0 10.111.756 8.43 1.68 8.43h1.682zm.846 0c0-.924.756-1.68 1.681-1.68s1.681.756 1.681 1.68v4.21c0 .924-.756 1.68-1.68 1.68a1.685 1.685 0 0 1-1.682-1.68zM5.89 3.362c-.926 0-1.682-.756-1.682-1.681S4.964 0 5.89 0s1.68.756 1.68 1.68v1.682zm0 .846c.924 0 1.68.756 1.68 1.681S6.814 7.57 5.89 7.57H1.68C.757 7.57 0 6.814 0 5.89c0-.926.756-1.682 1.68-1.682zm6.749 1.682c0-.926.755-1.682 1.68-1.682S16 4.964 16 5.889s-.756 1.681-1.68 1.681h-1.681zm-.848 0c0 .924-.755 1.68-1.68 1.68A1.685 1.685 0 0 1 8.43 5.89V1.68C8.43.757 9.186 0 10.11 0c.926 0 1.681.756 1.681 1.68zm-1.681 6.748c.926 0 1.682.756 1.682 1.681S11.036 16 10.11 16s-1.681-.756-1.681-1.68v-1.682h1.68zm0-.847c-.924 0-1.68-.755-1.68-1.68s.756-1.681 1.68-1.681h4.21c.924 0 1.68.756 1.68 1.68 0 .926-.756 1.681-1.68 1.681z"/>
                       </svg>

                        </div>
                        
                        <div class="p-3 rounded-3 w-75" style="background: rgba(255, 255, 255, 0.1);">
                            <pre>{{ respuesta.response }}</pre>

                        </div>
                    </div>
                </div>
                <div class="card-footer border-1" style="background: transparent;">
                    <form [formGroup]="profileLogin" (ngSubmit)="preguntar()">
                        <div class="input-group">
                            <input type="text" formControlName="pregunta" class="form-control rounded-start-3 border-0" 
    placeholder="Escribe un mensaje..." 
    style="background: rgba(255, 255, 255, 0.1); color: white;">

<input type="file" (change)="onArchivoSeleccionado($event)" class="form-control rounded-start-3 border-0" 
    style="background: rgba(255, 255, 255, 0.1); color: white;">


                            <button type="submit" class="btn btn-primary rounded-end-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                                    <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"/>
                                  </svg>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #modalEjemploExcel let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">ğŸ¤– Cosas en las que te puede ayudar la IA</h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
    </div>
  
    <div class="modal-body">
      <div class="card shadow w-100 bg-white p-4" style="border-radius: 15px;">
        <p class="mb-3 text-muted text-center">
          La inteligencia artificial de tu negocio estÃ¡ diseÃ±ada para facilitarte tareas, ahorrar tiempo y ayudarte a tomar mejores decisiones. Estas son algunas de sus funciones:
        </p>
  
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            ğŸ“¦ <strong>Listar productos:</strong> Muestra todos tus productos disponibles de forma instantÃ¡nea.
          </li>
          <li class="list-group-item">
            â• <strong>AÃ±adir productos:</strong> Puedes dictarle o escribir los datos y ella los crea automÃ¡ticamente.
          </li>
          <li class="list-group-item">
            ğŸ”„ <strong>Actualizar productos:</strong> Cambia el stock, precio o nombre con una simple orden.
          </li>
          <li class="list-group-item">
            ğŸ¤ <strong>Recomendar productos:</strong> Sugiere quÃ© productos ofrecer segÃºn tus ventas y tendencias.
          </li>
          <li class="list-group-item">
            ğŸ“¤ <strong>Enviar promociones:</strong> Sube un Excel con correos y dile quÃ© quieres que les envÃ­e.
          </li>
          <li class="list-group-item">
            ğŸ§¾ <strong>Entender facturas:</strong> Lee PDFs o Excels de facturas y te dice quÃ© contienen o si hay errores.
          </li>
          <li class="list-group-item">
            ğŸ“Š <strong>Cierre mensual:</strong> Genera automÃ¡ticamente un resumen de ingresos, gastos y beneficios.
          </li>
          <li class="list-group-item">
            ğŸ§  <strong>Asistente fiscal:</strong> Responde preguntas como â€œÂ¿CuÃ¡nto debo pagar de IVA?â€ o â€œÂ¿Este gasto es deducible?â€.
          </li>
          <li class="list-group-item text-primary fw-semibold text-center">
            âœ¨ ...y muchas mÃ¡s cosas que iremos activando poco a poco.
          </li>
        </ul>
  
        <div class="alert alert-warning mt-4" role="alert">
          âš ï¸ <strong>Importante:</strong> La IA estÃ¡ en constante aprendizaje, por lo que puede cometer errores o dar respuestas incompletas. Siempre valida la informaciÃ³n antes de tomar decisiones importantes.
        </div>
  
        <p class="mt-3 text-center text-success fw-semibold">ğŸš€ Â¡Tu IA estÃ¡ lista para ayudarte a llevar tu negocio al siguiente nivel!</p>
      </div>
    </div>
  </ng-template>
  
  