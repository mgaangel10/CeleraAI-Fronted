<div class="w-100 d-flex">

    <div class="w-25   align-content-center text-center" style="height: 100vh; background: linear-gradient(135deg, #f0f4ff, #e4f7ff);  border-top-right-radius: 20px; border-bottom-right-radius: 15px;">
      <mat-card 
      class="business-card-gold mb-5 mx-auto"
      style="max-width: 500px; cursor: pointer;"
      [routerLink]="['/home']">
    
      <div class="p-4 d-flex align-items-center justify-content-between">
        <!-- Info del negocio -->
        <div class="d-flex flex-column">
          <span class="text-uppercase small mb-1 text-dark" style="letter-spacing: 1px;">Tu negocio</span>
          <h4 class="mb-0 fw-bold" style="color: #7D6608;">{{ negocios.nombre }}</h4>
        </div>
    
        <!-- √çcono navegaci√≥n -->
        <div class="d-flex align-items-center justify-content-center bg-white rounded-circle shadow-sm"
             style="width: 45px; height: 45px;">
             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"/>
            </svg>
        </div>
      </div>
    </mat-card>
          <div class="h-75">
              
              <app-header></app-header>
          </div>
    
    </div>
    <div class="w-100 py-4">
      <!-- T√çTULO -->
     
    
      <!-- BOT√ìN A√ëADIR PRODUCTO -->
      <div class="text-center mb-4">
        <button class="btn btn-info px-4 py-2 shadow-sm btn-premium pastel-crear" (click)="open(content)" style="background-color: #D1F2EB;
        color: #117864;
        ">
          <i class="bi bi-plus-lg me-2"></i> A√±adir productos
        </button>
      </div>
    
      <!-- FORMULARIO DE IMPORTACI√ìN -->
      <form (submit)="onSubmit()" class="bg-white border rounded-4 shadow-sm p-4 mx-auto mb-5" style="max-width: 600px;">
        <div class="mb-3">
          <label for="fileInput" class="form-label fw-semibold">üìÇ Seleccionar archivo Excel:</label>
          <input 
            type="file" 
            id="fileInput" 
            class="form-control" 
            (change)="onFileSelected($event)" 
            accept=".xlsx">
        </div>
        <button class="btn btn-info w-100 py-2 btn-premium pastel-crear "type="submit" style="background-color: #D1F2EB;
        color: #117864;">
          <i class="bi bi-upload me-2"></i> Importar Productos
        </button>
        <p class="mt-3 text-center text-success fw-semibold" *ngIf="mensaje">{{ mensaje }}</p>
      </form>
    
      <!-- FILTROS -->
      <div class="d-flex flex-wrap justify-content-center gap-2 mb-4">
        <button class="btn btn-info d-flex align-items-center gap-2 btn-premium pastel-filtrar" (click)="verTodosLOsProductos()" style="background-color: #D6EAF8;
        color: #21618C;
        ">
           Todos <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
        </svg>
        </button>
        <button class="btn btn-info d-flex align-items-center gap-2 btn-premium pastel-filtrar" (click)="mayorPrecio()" style="background-color: #D6EAF8;
color: #21618C;
">
           Precio alto <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
        </svg>
        </button>
        <button class="btn btn-info d-flex align-items-center gap-2 btn-premium pastel-filtrar" (click)="mayorStock()" style="background-color: #D6EAF8;
color: #21618C;
">
           Mayor stock <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
        </svg>
        </button>
        <button class="btn btn-info d-flex align-items-center gap-2 btn-premium pastel-filtrar" (click)="menorStock()" style="background-color: #D6EAF8;
color: #21618C;
">
           Bajo stock <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
        </svg>
        </button>
        <button class="btn btn-info d-flex align-items-center gap-2 btn-premium pastel-filtrar" (click)="alfabeticamente()" style="background-color: #D6EAF8;
        color: #21618C;
        ">
           A-Z <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
          <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2z"/>
        </svg>
        </button>
      </div>
    
      <!-- TABLA DE PRODUCTOS -->
      <div class="card shadow-sm border-0 rounded-4">
        <div class="table-responsive">
          <table class="table table-hover align-middle text-center mb-0">
            <thead class="table-dark" style="background: linear-gradient(135deg, #f0f4ff, #e4f7ff);">
              <tr>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Proveedor</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let p of allproductos ">
                <td>{{ p.nombre }}</td>
                <td>{{ p.precio }}‚Ç¨</td>
                <td>{{ p.stock }}</td>
                <td>{{ p.precioProveedor }}‚Ç¨</td>
                <td>
                  <div ngbDropdown container="body">
                    <button type="button" class="btn btn-outline-primary btn-sm" ngbDropdownToggle (click)="$event.stopPropagation()">
                      Acciones
                    </button>
                    <div ngbDropdownMenu>
                      <button ngbDropdownItem (click)="open2(contentE,p.id)" style="">‚úèÔ∏è Editar</button>
                      <div class="dropdown-divider"></div>
                      <button ngbDropdownItem (click)="ponerNoDisponible(p.id)">üóëÔ∏è Eliminar</button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    
        <!-- Paginaci√≥n -->
        <div class="d-flex justify-content-between  mt-3">
          <ngb-pagination
            [(page)]="page"
            [pageSize]="pageSize"
            [collectionSize]="collectionSize"
            (pageChange)="refreshCountries()">
          </ngb-pagination>
        
          <select class="form-select w-auto ms-2" [(ngModel)]="pageSize" (ngModelChange)="refreshCountries()">
            <option [ngValue]="2">2 por p√°gina</option>
            <option [ngValue]="4">4 por p√°gina</option>
            <option [ngValue]="6">6 por p√°gina</option>
          </select>
        </div>
      </div>
    </div>
    
  

</div>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">A√±adir Producto</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div class="modal-body">
   

<div class="div mx-auto mt-5 card shadow w-100   bg-white rounded" style=" border-radius: 15px;">
<form [formGroup]="profileLogin" (ngSubmit)="login()">
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Nombre producto</label>
  <input type="text" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="nombre">


</div>
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Precio</label>
  <input type="number" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="precio">


</div>
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Stock</label>
  <input type="number" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="stock">


</div>
<div class="mb-3 mx-auto w-50">
  <label for="exampleInputPassword1" class="form-label">Precio Proveedor</label>
  <input type="number" class="form-control" id="exampleInputPassword1" formControlName="precioProveedor">
</div>
<div class="mb-3 mx-auto w-50">
  <button type="submit " class="btn btn-primary  w-100">Submit</button>
</div>

</form>
</div>
  </div>
 
</ng-template>

<ng-template #contentE let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Editar Producto</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div class="modal-body">
   

<div class="div mx-auto mt-5 card shadow w-100   bg-white rounded" style=" border-radius: 15px;">
<form [formGroup]="profileLogin" (ngSubmit)="editar()">
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Nombre producto</label>
  <input type="text" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="nombre">


</div>
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Precio</label>
  <input type="number" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="precio">


</div>
<div class="mb-3 mx-auto w-50 mt-5">
  <label for="emailLog" class="form-label">Stock</label>
  <input type="number" class="form-control" id="emailLog" aria-describedby="emailHelp" formControlName="stock">


</div>
<div class="mb-3 mx-auto w-50">
  <label for="exampleInputPassword1" class="form-label">Precio Proveedor</label>
  <input type="number" class="form-control" id="exampleInputPassword1" formControlName="precioProveedor">
</div>
<div class="mb-3 mx-auto w-50">
  <button type="submit " class="btn btn-primary  w-100">Submit</button>
</div>

</form>
</div>
  </div>
 
</ng-template>